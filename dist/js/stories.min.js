/*! project-name v0.0.1 | (c) 2020 Siphosenkosi Ndhlovu | MIT License | http://link-to-your-git-repo.com */
var $plansContainer=document.querySelector(".our-plans"),$loading=document.querySelector("#infinite-loading"),$error=document.querySelector("#infinite-error"),$retry=document.querySelector("#retry"),lang=document.documentElement.attributes.lang.value,offset=0,limit=2;function getDocumentHeight(){const e=document.body,t=document.documentElement;return Math.max(e.scrollHeight,e.offsetHeight,t.clientHeight,t.scrollHeight,t.offsetHeight)}function createElement(e,t,n){var o=document.createElement(e);t&&Object.keys(t).forEach((function(e){o.setAttribute(e,t[e])}));return n&&"string"!=typeof n?(console.log(typeof n),n.forEach((function(e){console.log(typeof e+"F CONDITION"),"string"!=typeof e&&"number"!=typeof e&&Boolean(e)?(console.log(e+"F CONDITION"),o.appendChild(e)):o.appendChild(document.createTextNode(e))}))):o.appendChild(document.createTextNode(n)),o}function getScrollTop(){return void 0!==window.pageYOffset?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop}function getStories(){return fetch(`assets/js/stories.${lang}.json`).then(e=>e.json()).then(e=>e.slice(offset,offset+limit))}function imageElement({src:e,altText:t}){return createElement("div",{class:"our-plans__image"},[createElement("div",{class:"our-plans__image-container"},[createElement("img",{src:e,alt:t})])])}function textElement({body:e,date:t,heading:n,picture:o}){return createElement("div",{class:"our-plans__text"},[createElement("div",{class:"our-plans__date"},[t]),imageElement(o),createElement("h2",{},[n]),createElement("div",{class:"deck"},e.map(e=>createElement("p",{},e)))])}function segment(e){return createElement("div",{class:"our-plans__segment"},[imageElement(e.picture),textElement(e)])}function addSegments(){$loading.classList.add("t-block"),$loading.classList.remove("t-hidden"),getStories().then(e=>{console.log(e),setTimeout((function(){e.forEach(e=>{$plansContainer.appendChild(segment(e))}),$loading.classList.add("t-hidden"),$loading.classList.remove("t-block"),$error.classList.add("t-hidden"),$error.classList.remove("t-block"),offset+=limit}),600)}).catch(e=>{console.log(e),$loading.classList.add("t-hidden"),$loading.classList.remove("t-block"),$error.classList.add("t-block"),$error.classList.remove("t-hidden")})}$retry.onclick=function(e){e.preventDefault(),addSegments()},window.onscroll=(()=>{getScrollTop()<getDocumentHeight()-window.innerHeight||(console.log(offset),addSegments())});